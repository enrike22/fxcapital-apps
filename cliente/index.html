<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FX | CAPITAL R.L. ‚Äî Cliente</title>
<style>
:root{--bg:#000;--fg:#fff;--muted:#ffffffcc;--card:#0d0d0d;--border:#1a1a1a;}
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Arial}
.container{max-width:1100px;margin:0 auto;padding:24px}
h1,h2{margin:0 0 8px} small{color:var(--muted)}
.login-hero{display:grid;grid-template-columns:1.2fr 1fr;gap:32px;align-items:center;min-height:65vh;background:radial-gradient(1200px 600px at 30% -20%,#1a1a1a 0%,transparent 60%),linear-gradient(#0b0b0b,#1b1b1b 40%,#2f2f2f 100%);border-radius:20px;padding:32px}
.brand-block h1{font-size:48px;letter-spacing:1px}
.features{display:flex;gap:18px;margin-top:24px;flex-wrap:wrap}
.feature{background:#0e1319;border:1px solid #1f2a3a;color:#dbe7ff;width:230px;padding:18px;border-radius:16px;box-shadow:0 6px 20px #0006}
.feature h3{margin:10px 0 4px;font-size:18px;color:#fff}
.feature p{margin:0;color:#9fb4d1}
.login-card{background:linear-gradient(180deg,#141414,#1e1e1e);border:1px solid #2a2a2a;border-radius:16px;padding:24px 22px;box-shadow:0 10px 30px #0007}
.login-card h2{text-align:center;margin-bottom:12px}
label{display:block;margin:8px 0 4px}
.input-wrap{position:relative}
.input-wrap .prefix{position:absolute;left:12px;top:50%;transform:translateY(-50%);opacity:.6}
.input-wrap input{width:100%;background:#000;color:#fff;border:1px solid #2a2a2a;border-radius:12px;padding:10px 12px 10px 38px;height:46px}
.btn{display:block;width:100%;background:#0f0f0f;color:#fff;border:1px solid #2a2a2a;border-radius:999px;padding:12px 16px;font-weight:700;cursor:pointer}
#loginMsg{text-align:center;color:#ffb3b3;min-height:20px}
@media (max-width:900px){.login-hero{grid-template-columns:1fr;padding:20px}.features{justify-content:center}}
</style>
</head>
<body>
<div class="container">
  <div class="login-hero">
    <div class="brand-block">
      <h1>FX | CAPITAL R.L.</h1>
      <small>Asesor√≠a ‚Äì Confianza ‚Äì Crecimiento</small>

      <div class="features">
        <div class="feature"><h3>Seguridad</h3><p>M√°xima protecci√≥n</p></div>
        <div class="feature"><h3>Rentabilidad</h3><p>Hasta 25% semestral*</p></div>
        <div class="feature"><h3>Control</h3><p>Transparencia total</p></div>
      </div>
      <small>*El porcentaje final depende de su plan.</small>
    </div>

    <div class="login-card">
      <h2>Iniciar Sesi√≥n</h2>
      <form id="loginForm" autocomplete="on">
        <label>Correo Electr√≥nico</label>
        <div class="input-wrap">
          <span class="prefix">‚úâÔ∏è</span>
          <input id="email" type="email" placeholder="tu@email.com" required>
        </div>

        <label style="margin-top:12px">Contrase√±a</label>
        <div class="input-wrap">
          <span class="prefix">üîí</span>
          <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
        </div>

        <div style="text-align:right;margin:8px 0 12px">
          <a href="#" style="color:#9fb4d1;text-decoration:none">¬øOlvid√≥ su contrase√±a?</a>
        </div>

        <button class="btn" type="submit">Iniciar Sesi√≥n</button>
        <p id="loginMsg"></p>
      </form>
    </div>
  </div>
</div>

<script>
const PROJECT_URL="https://czvpehbubfrinutztnwh.supabase.co";
const ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6dnBlaGJ1YmZyaW51dHp0bndoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MzU1MTIsImV4cCI6MjA3NDQxMTUxMn0.m07fP_x2_q8MyjZWcy1xbV-Te841Vv0NNaFKq4GDSsY";

document.getElementById("loginForm").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const email=document.getElementById("email").value.trim();
  const password=document.getElementById("password").value;

  // limpiar estados previos
  localStorage.removeItem('token'); localStorage.removeItem('uid');

  const r=await fetch(`${PROJECT_URL}/auth/v1/token?grant_type=password`,{
    method:"POST",
    headers:{apikey:ANON_KEY,"Content-Type":"application/json"},
    body:JSON.stringify({email,password})
  });
  const data=await r.json();
  if(!r.ok){ document.getElementById("loginMsg").textContent="Login inv√°lido"; return; }

  // guardar sesi√≥n y redirigir al dashboard
  localStorage.token=data.access_token;
  localStorage.uid=data.user.id;
  localStorage.email=email;
  window.location.href="cliente-dashboard.html";
});
</script>
</body>
</html>
