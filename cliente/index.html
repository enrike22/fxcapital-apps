<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FX | CAPITAL R.L. ‚Äî Iniciar sesi√≥n</title>
<style>
:root{--bg:#000;--fg:#fff;--muted:#ffffffcc;--card:#0d0d0d;--border:#1a1a1a;}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Arial}
.container{max-width:1100px;margin:0 auto;padding:24px}
.card{background:linear-gradient(180deg,#141414,#1e1e1e);border:1px solid #2a2a2a;border-radius:16px;padding:24px 22px;box-shadow:0 10px 30px #0007}
h1,h2{margin:0 0 8px}
small{color:var(--muted)}
button{background:#fff;color:#000;border:none;padding:12px 16px;border-radius:999px;font-weight:700;cursor:pointer}
.hidden{display:none}

/* HERO */
.login-hero{display:grid;grid-template-columns:1.2fr 1fr;gap:32px;align-items:center;min-height:65vh;background:radial-gradient(1200px 600px at 30% -20%,#1a1a1a 0%,transparent 60%),linear-gradient(#0b0b0b,#1b1b1b 40%,#2f2f2f 100%);border-radius:20px;padding:32px}
.brand-block h1{font-size:48px;letter-spacing:1px;margin:0 0 6px}
.brand-block small{color:var(--muted)}
.features{display:flex;gap:18px;margin-top:24px;flex-wrap:wrap}
.feature{background:#0e1319;border:1px solid #1f2a3a;color:#dbe7ff;width:230px;padding:18px;border-radius:16px;box-shadow:0 6px 20px #0006}
.feature h3{margin:10px 0 4px;font-size:18px;color:#fff}
.feature p{margin:0;color:#9fb4d1}
.icon{width:40px;height:40px;background:#0b1118;border:1px solid #2a3b52;border-radius:12px;display:flex;align-items:center;justify-content:center}

/* inputs + ojos */
label{display:block;margin:8px 0 4px}
.input-wrap{position:relative}
.input-wrap .prefix{position:absolute;left:12px;top:50%;transform:translateY(-50%);opacity:.6}
.input-wrap input{width:100%;background:#000;color:#fff;border:1px solid #2a2a2a;border-radius:12px;padding:10px 12px 10px 42px;height:46px;padding-right:52px}
.eye-btn{position:absolute;right:8px;top:50%;transform:translateY(-50%);width:42px;height:42px;background:transparent;border:0;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:5}
.eye,.eye-off{width:28px;height:28px;fill:#fff}

#loginMsg{min-height:20px;color:#ffb3b3;text-align:center;margin-top:8px}

@media (max-width:900px){
  .login-hero{grid-template-columns:1fr;padding:20px}
  .features{justify-content:center}
}
</style>
</head>
<body>
<div class="container">

  <div class="login-hero">
    <!-- Columna izquierda -->
    <div class="brand-block">
      <h1>FX | CAPITAL R.L.</h1>
      <small>Asesor√≠a ‚Äì Confianza ‚Äì Crecimiento</small>

      <div class="features">
        <div class="feature">
          <div class="icon"><svg viewBox="0 0 24 24" width="22" height="22" fill="#cfe2ff"><path d="M12 2l7 3v6c0 5-3.5 9-7 11-3.5-2-7-6-7-11V5l7-3z"/></svg></div>
          <h3>Seguridad</h3><p>M√°xima protecci√≥n</p>
        </div>
        <div class="feature">
          <div class="icon"><svg viewBox="0 0 24 24" width="22" height="22" fill="#cfe2ff"><path d="M4 14h3l2-3 3 5 2-3h6v2h-5l-3 4-3-5-1 2H4zM4 6h16v2H4z"/></svg></div>
          <h3>Rentabilidad</h3><p>Hasta 25% semestral*</p>
        </div>
        <div class="feature">
          <div class="icon"><svg viewBox="0 0 24 24" width="22" height="22" fill="#cfe2ff"><path d="M12 1a5 5 0 00-5 5v3H5a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2v-8a2 2 0 00-2-2h-2V6a5 5 0 00-5-5zm-3 8V6a3 3 0 116 0v3H9z"/></svg></div>
          <h3>Control</h3><p>Transparencia total</p>
        </div>
      </div>
      <small>*El porcentaje final depende de su plan.</small>
    </div>

    <!-- Columna derecha: Login card -->
    <div class="card">
      <h2 style="text-align:center">Iniciar Sesi√≥n</h2>
      <form id="loginForm" autocomplete="on">
        <label>Correo Electr√≥nico</label>
        <div class="input-wrap">
          <span class="prefix">‚úâÔ∏è</span>
          <input id="email" type="email" placeholder="tu@email.com" required>
        </div>

        <label style="margin-top:12px">Contrase√±a</label>
        <div class="input-wrap">
          <span class="prefix">üîí</span>
          <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
          <button type="button" class="eye-btn" data-toggle="password" aria-label="mostrar/ocultar">
            <svg class="eye" viewBox="0 0 24 24"><path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 110-10 5 5 0 010 10z" fill="#fff"/></svg>
          </button>
        </div>

        <div style="text-align:right;margin:8px 0 12px">
          <a href="#" style="color:#9fb4d1;text-decoration:none">¬øOlvid√≥ su contrase√±a?</a>
        </div>

        <button type="submit">Iniciar Sesi√≥n</button>
        <div id="loginMsg"></div>
      </form>
    </div>
  </div>
</div>

<script>
/*** CONFIG SUPABASE ***/
const PROJECT_URL = "https://czvpehbubfrinutztnwh.supabase.co";
const ANON_KEY    = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6dnBlaGJ1YmZyaW51dHp0bndoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MzU1MTIsImV4cCI6MjA3NDQxMTUxMn0.m07fP_x2_q8MyjZWcy1xbV-Te841Vv0NNaFKq4GDSsY";

/*** Mostrar/ocultar password (ojo grande) ***/
document.addEventListener('click',(e)=>{
  const btn=e.target.closest('.eye-btn'); if(!btn) return;
  const id=btn.getAttribute('data-toggle'); const el=document.getElementById(id); if(!el) return;
  el.type = (el.type==='password') ? 'text' : 'password';
  btn.innerHTML = (el.type==='password')
    ? '<svg class="eye" viewBox="0 0 24 24"><path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 110-10 5 5 0 010 10z" fill="#fff"/></svg>'
    : '<svg class="eye-off" viewBox="0 0 24 24"><path d="M2 5l2-2 17 17-2 2-3.6-3.6C13.7 19 12.9 19 12 19 5 19 2 12 2 12a17 17 0 0 1 5.2-6.3L2 5zm7.3 2.9A5 5 0 0 0 7 12a5 5 0 0 0 5 5c.6 0 1.1-.1 1.6-.3L9.3 7.9zM12 5c7 0 10 7 10 7a16.8 16.8 0 0 1-3.2 4.7l-1.5-1.5A14.6 14.6 0 0 0 20 12s-3-7-8-7c-1 0-2 .2-2.9.5L7.7 4.1C9 3.7 10.4 3.5 12 3.5z" fill="#fff"/></svg>';
});

/*** LOGIN (guarda access + refresh tokens y redirige al dashboard) ***/
document.getElementById("loginForm").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;
  const msg = document.getElementById("loginMsg");
  msg.textContent = "";

  // limpia sesi√≥n previa
  localStorage.clear();

  const r = await fetch(`${PROJECT_URL}/auth/v1/token?grant_type=password`, {
    method: "POST",
    headers: { apikey: ANON_KEY, "Content-Type":"application/json" },
    body: JSON.stringify({ email, password })
  });
  const data = await r.json();

  if(!r.ok){
    msg.textContent = data?.error_description || "Login inv√°lido";
    return;
  }

  // ‚ö†Ô∏è guarda ambos tokens (IMPORTANTE para cambio de contrase√±a luego)
  localStorage.token = data.access_token;
  localStorage.refresh_token = data.refresh_token;
  localStorage.uid = data.user.id;
  localStorage.email = email;

  // redirige al dashboard del cliente
  location.href = "cliente-dashboard.html";
});
</script>
</body>
</html>
