<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FX | CAPITAL R.L. ‚Äî Iniciar sesi√≥n</title>

  <!-- FAVICONS (archivos en la misma carpeta /cliente) -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#0b0c0e">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0c0e; --card:#14171c; --panel:#0f1115; --txt:#f5f7fb; --muted:#a8b0bc; --line:#21252c;
      --shadow:0 18px 48px rgba(0,0,0,.5); --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 800px at 10% -20%, #14171c 0%, #0b0c0e 45%, #060708 100%) fixed, #000;color:var(--txt);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    .wrap{min-height:100%;display:grid;place-items:center;padding:28px}
    .card{width:min(960px,94vw);display:grid;grid-template-columns:1.2fr 1fr;gap:0;background:linear-gradient(180deg,#15181f,#0f1216);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    @media (max-width:900px){.card{grid-template-columns:1fr}}
    .left{position:relative;padding:36px}
    .right{padding:36px;border-left:1px solid var(--line);background:linear-gradient(180deg,#12151b,#0d0f13)}
    .logo{width:112px;height:112px;border-radius:16px;object-fit:contain;background:#fff;padding:10px;border:1px solid var(--line);box-shadow:inset 0 1px 0 rgba(255,255,255,.05)}
    h1{margin:14px 0 6px 0;font-size:clamp(28px,4.6vw,44px);font-weight:800;letter-spacing:.3px}
    .sub{margin:0 0 18px 0;color:#cfd6e2;font-weight:600}
    .grid{display:grid;gap:12px}
    label{font-size:14px;color:var(--muted)}
    .input{width:100%;border:1px solid var(--line);background:#0f1116;color:#fff;border-radius:12px;padding:12px 14px}
    .btn{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer;background:#fff;color:#0b0c0e;box-shadow:0 12px 28px rgba(0,0,0,.35)}
    .btn.secondary{background:linear-gradient(180deg,#1a1d23,#111419);color:#fff;border:1px solid var(--line)}
    .muted{color:var(--muted);font-size:13px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    a.link{color:#fff;text-decoration:none;border-bottom:1px dashed rgba(255,255,255,.35)}
    .hint{margin-top:12px;color:#a8b0bc;font-size:13px}
    .field{position:relative}
    .field .input{padding-right:46px}
    .eye{position:absolute;right:8px;top:50%;transform:translateY(-50%);width:40px;height:40px;border-radius:12px;border:1px solid var(--line);display:grid;place-items:center;background:#10131a;color:#fff;cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="left">
        <img src="logo.png" onerror="this.onerror=null;this.src='https://raw.githubusercontent.com/enrike22/fxcapital-apps/main/cliente/logo.png?raw=1';" alt="FX | CAPITAL R.L." class="logo">
        <h1>FX | CAPITAL R.L.</h1>
        <div class="sub">Portal de clientes</div>
        <p class="muted">Accede para ver tu cuenta, resultados del mes y realizar solicitudes.</p>
      </div>

      <div class="right">
        <form id="loginForm" class="grid" autocomplete="on">
          <div>
            <label for="email">Correo</label>
            <input id="email" class="input" type="email" placeholder="tu@correo.com" required>
          </div>
          <div class="field">
            <label for="password">Contrase√±a</label>
            <input id="password" class="input" type="password" minlength="8" required>
            <button type="button" id="eye" class="eye" aria-label="Mostrar/ocultar">üëÅÔ∏è</button>
          </div>
          <button class="btn" type="submit">Iniciar sesi√≥n</button>
          <div class="row">
            <span class="muted">¬øNo puedes entrar?</span>
            <a class="link" href="#" id="forgot">Olvid√© mi contrase√±a</a>
          </div>
          <div id="msg" class="hint"></div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal simple para ‚ÄúOlvid√© mi contrase√±a‚Äù -->
  <dialog id="forgotDlg">
    <div style="padding:20px 22px;border-bottom:1px solid #21252c;font-weight:800">Recuperaci√≥n de contrase√±a</div>
    <div style="padding:18px 22px;color:#cfd6e2">
      Por favor, visite o p√≥ngase en contacto con una de nuestras oficinas para solicitar el restablecimiento de su contrase√±a.
      <br><br>Cordialmente,<br><b>FX | CAPITAL R.L.</b>
      <div style="margin-top:16px;display:flex;gap:10px;justify-content:flex-end">
        <button id="closeForgot" class="btn secondary">Cerrar</button>
      </div>
    </div>
  </dialog>

  <script src="https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
  <script>
    const BASE_URL = (location.pathname.includes('/cliente/')) ? location.origin + '/cliente/' : location.origin + '/';
    const DASHBOARD = BASE_URL + 'cliente-dashboard.html';
    const SUPABASE_URL = 'https://czvpehbubfrinutztnwh.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6dnBlaGJ1YmZyaW51dHp0bndoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MzU1MTIsImV4cCI6MjA3NDQxMTUxMn0.m07fP_x2_q8MyjZWcy1xbV-Te841Vv0NNaFKq4GDSsY';
    const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth:{persistSession:true,autoRefreshToken:true,detectSessionInUrl:true} });
    const $ = s => document.querySelector(s);

    $('#eye').addEventListener('click', ()=>{
      const p = $('#password');
      const show = p.type === 'password';
      p.type = show ? 'text' : 'password';
    });

    $('#forgot').addEventListener('click', (e)=>{ e.preventDefault(); document.getElementById('forgotDlg').showModal(); });
    $('#closeForgot').addEventListener('click', ()=> document.getElementById('forgotDlg').close());

    document.getElementById('loginForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      $('#msg').textContent = 'Verificando‚Ä¶';
      const email = $('#email').value.trim();
      const password = $('#password').value;
      const { error } = await sb.auth.signInWithPassword({ email, password });
      if(error){ $('#msg').textContent = 'Credenciales inv√°lidas o cuenta no encontrada.'; return; }
      window.location.href = DASHBOARD;
    });

    // Si ya tiene sesi√≥n, ir directo al dashboard
    (async ()=>{
      const { data:{ session } } = await sb.auth.getSession();
      if(session) window.location.href = DASHBOARD;
    })();
  </script>
</body>
</html>
